# Panduan Deploy Laravel ke AlwaysData Free Hosting

## üìã Persiapan Lokal

### 1. Optimasi Project Laravel
```bash
# Jalankan perintah berikut di terminal
composer install --optimize-autoloader --no-dev
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### 2. Update File .env untuk Production
Buat file `.env.production` dengan konfigurasi berikut:

```env
APP_NAME=Blog
APP_ENV=production
APP_KEY=base64:YOUR_APP_KEY_HERE
APP_DEBUG=false
APP_URL=https://yourdomain.alwaysdata.net

LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

DB_CONNECTION=mysql
DB_HOST=mysql-youraccount.alwaysdata.net
DB_PORT=3306
DB_DATABASE=youraccount_blog
DB_USERNAME=youraccount
DB_PASSWORD=your_database_password

BROADCAST_DRIVER=log
CACHE_DRIVER=file
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database
SESSION_DRIVER=file
SESSION_LIFETIME=120

# Nonaktifkan Redis untuk free hosting
# REDIS_CLIENT=predis
# CACHE_STORE=redis
# SESSION_DRIVER=redis
# QUEUE_CONNECTION=redis
```

### 3. File yang TIDAK Perlu Diupload
Buat file `.deployignore` atau pastikan `.gitignore` sudah benar:
```
/node_modules
/public/hot
/public/storage
/storage/*.key
/vendor
.env
.env.backup
.phpunit.result.cache
Homestead.json
Homestead.yaml
npm-debug.log
yarn-error.log
/.idea
/.vscode
```

---

## üåê Langkah-langkah Deploy ke AlwaysData

### STEP 1: Buat Akun AlwaysData
1. Buka https://www.alwaysdata.com/
2. Klik **"Try for free"** atau **"Sign up"**
3. Isi form registrasi (email, password, account name)
4. Verifikasi email Anda
5. Login ke dashboard AlwaysData

### STEP 2: Setup Database MySQL
1. Di dashboard AlwaysData, klik **"Databases"** di menu kiri
2. Klik **"Add a database"**
3. Pilih **MySQL**
4. Isi:
   - Name: `youraccount_blog` (atau nama lain)
   - User: (otomatis terisi dengan account name Anda)
   - Password: (buat password yang kuat)
5. Klik **"Submit"**
6. **Catat informasi database** (host, database name, username, password)

### STEP 3: Upload File via FTP/SFTP

#### Opsi A: Menggunakan FileZilla (Recommended)
1. Download FileZilla Client: https://filezilla-project.org/
2. Buka FileZilla
3. Masukkan koneksi SFTP:
   - Host: `ssh-youraccount.alwaysdata.net`
   - Username: `youraccount`
   - Password: (password akun AlwaysData)
   - Port: `22`
4. Klik **"Quickconnect"**
5. Navigate ke folder `/www/` di server
6. Upload semua file Laravel KECUALI:
   - folder `vendor/` (akan diinstall via SSH)
   - folder `node_modules/`
   - file `.env` (akan dibuat manual)

#### Opsi B: Menggunakan Git (Advanced)
1. Di dashboard AlwaysData, klik **"SSH"** ‚Üí **"Enable SSH access"**
2. Di terminal lokal:
```bash
# Inisialisasi git jika belum
git init
git add .
git commit -m "Initial commit"

# Push ke repository (GitHub/GitLab)
git remote add origin https://github.com/username/blog.git
git push -u origin main
```
3. SSH ke AlwaysData:
```bash
ssh youraccount@ssh-youraccount.alwaysdata.net
cd www
git clone https://github.com/username/blog.git .
```

### STEP 4: Setup via SSH
1. Di dashboard AlwaysData, klik **"SSH"** di menu kiri
2. Klik **"Enable SSH access"** jika belum aktif
3. Buka terminal/CMD dan connect via SSH:
```bash
ssh youraccount@ssh-youraccount.alwaysdata.net
```
4. Masukkan password akun AlwaysData
5. Navigate ke folder web:
```bash
cd www
```

6. Install Composer dependencies:
```bash
composer install --optimize-autoloader --no-dev
```

7. Buat file `.env`:
```bash
cp .env.example .env
nano .env
```

8. Edit file `.env` dengan konfigurasi production (sesuaikan dengan info database Anda):
```env
APP_ENV=production
APP_DEBUG=false
APP_URL=https://youraccount.alwaysdata.net

DB_CONNECTION=mysql
DB_HOST=mysql-youraccount.alwaysdata.net
DB_DATABASE=youraccount_blog
DB_USERNAME=youraccount
DB_PASSWORD=your_database_password
```
Tekan `Ctrl+X`, lalu `Y`, lalu `Enter` untuk save

9. Generate Application Key:
```bash
php artisan key:generate
```

10. Setup Storage Link:
```bash
php artisan storage:link
```

11. Run Migrations:
```bash
php artisan migrate --force
```

12. (Opsional) Seed Database:
```bash
php artisan db:seed --force
```

13. Set Permissions:
```bash
chmod -R 775 storage bootstrap/cache
```

14. Clear dan Cache Config:
```bash
php artisan config:clear
php artisan cache:clear
php artisan route:clear
php artisan view:clear

php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### STEP 5: Konfigurasi Website di AlwaysData
1. Di dashboard AlwaysData, klik **"Web"** ‚Üí **"Sites"**
2. Klik **"Add a site"**
3. Isi konfigurasi:
   - **Addresses**: `youraccount.alwaysdata.net` (atau custom domain)
   - **Type**: **PHP**
   - **PHP version**: Pilih **8.2** atau **8.3**
   - **Root directory**: `/www/public` ‚ö†Ô∏è **PENTING: Harus ke folder public!**
4. Klik **"Submit"**

### STEP 6: Setup .htaccess (Jika Diperlukan)
File `.htaccess` di folder `public/` Laravel sudah cukup, tapi pastikan berisi:

```apache
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # Send Requests To Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>
```

---

## ‚úÖ Verifikasi Deployment

1. Buka browser dan akses: `https://youraccount.alwaysdata.net`
2. Pastikan halaman login muncul tanpa error
3. Test login dengan akun yang sudah dibuat
4. Test upload gambar artikel
5. Test semua fitur CRUD

---

## üîß Troubleshooting

### Error: "500 Internal Server Error"
```bash
# Check error logs
tail -f ~/admin/logs/error.log

# Clear all cache
php artisan optimize:clear
```

### Error: "Storage not writable"
```bash
chmod -R 775 storage
chmod -R 775 bootstrap/cache
```

### Error: Database Connection
- Pastikan kredensial database di `.env` benar
- Cek apakah database sudah dibuat di AlwaysData
- Test koneksi: `php artisan migrate --force`

### Error: "Mix Manifest Not Found"
```bash
# Jika menggunakan Vite/Mix, compile assets dulu
npm install
npm run build

# Upload folder public/build ke server
```

### Gambar Upload Tidak Muncul
```bash
# Pastikan storage link sudah dibuat
php artisan storage:link

# Set permission
chmod -R 775 storage/app/public
```

---

## üìù Maintenance

### Update Code
```bash
# Via SSH
cd www
git pull origin main
composer install --optimize-autoloader --no-dev
php artisan migrate --force
php artisan optimize
```

### Backup Database
```bash
# Di AlwaysData dashboard ‚Üí Databases ‚Üí Export
# Atau via SSH:
mysqldump -u youraccount -p youraccount_blog > backup.sql
```

---

## ‚ö†Ô∏è Catatan Penting untuk Free Hosting

1. **Storage Limit**: AlwaysData free = 100MB, pastikan tidak upload file besar
2. **Database Limit**: 10MB untuk free plan
3. **No Redis**: Free plan tidak support Redis, gunakan `file` atau `database` driver
4. **Cron Jobs**: Terbatas, gunakan dengan bijak untuk queue:work
5. **Performance**: Shared hosting, jadi performa terbatas

---

## üéØ Checklist Deployment

- [ ] Composer install (production)
- [ ] File .env sudah dikonfigurasi
- [ ] Database sudah dibuat di AlwaysData
- [ ] File uploaded via FTP/Git
- [ ] SSH access enabled
- [ ] Migrations sudah dijalankan
- [ ] Storage link sudah dibuat
- [ ] Permissions sudah di-set (775)
- [ ] Website configuration di AlwaysData (root: /www/public)
- [ ] Cache sudah di-clear dan di-generate
- [ ] Test semua fitur aplikasi

---

## üìû Support

- AlwaysData Documentation: https://help.alwaysdata.com/
- Laravel Deployment: https://laravel.com/docs/deployment
- Community Forum: https://forum.alwaysdata.com/

---

**Selamat! Project Laravel Anda sekarang sudah live di AlwaysData! üéâ**
